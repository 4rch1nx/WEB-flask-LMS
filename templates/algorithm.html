{% extends "base.html" %}

{% block content %}
<div class="container">
    <div class="row">
        <h2 style='font-family: "Tektur", sans-serif;
                  font-optical-sizing: auto;
                  font-weight: <weight>;
                  font-style: normal;
                  font-variation-settings:
                    "wdth" 100;'> Алгоритм движения </h2>
        <p> Создайте свой алгоритм движения робота! Используйте кнопки или пишите свой код в редакторе!</p>
    </div>
    <div class="row">
        <p style="font-weight: 500;"> Допустимые функции: </p>
        <p>
        • <code> вперёд(время) </code> - движение робота прямо вперёд. В аргументах функции указывается время движения (в секундах).
        </p>
        <p>
            • <code> назад(время) </code> - движение робота прямо назад. В аргументах функции указывается время движения (в секундах).
        </p>
        <p>
            • <code> направо(время) </code> - поворот робота направо. В аргументах функции указывается время движения (в секундах).
        </p>
        <p>
            • <code> налево(время) </code> - поворот робота налево. В аргументах функции указывается время движения (в секундах).
        </p>
    </div>
    <form action="" method="post">
        {{ form.hidden_tag() }}
        <div class="row">
            <div class="col-md-auto">
                <br>
                <br>
                <br>
                <br>
                <div class="mb-3">
                    {{ form.turn_left_button(class="btn btn-primary", style="width: 90px; height: 90px;") }}
                </div>
            </div>
            <div class="col-md-auto">
                <div class="mb-3">
                    {{ form.go_ahead_button(class="btn btn-primary", style="width: 90px; height: 90px;") }}
                </div>
                <img src="static/img/control_panel_logo.png" style="width: 90px; height: 90px;">
                <br>
                <div class="mb-3">
                    {{ form.go_back_button(class="btn btn-primary", style="width: 90px; height: 90px;") }}
                </div>
            </div>
            <div class="col-md-auto">
                <br>
                <br>
                <br>
                <br>
                <div class="mb-3">
                    {{ form.turn_right_button(class="btn btn-primary", style="width: 90px; height: 90px;") }}
                </div>
            </div>
        </div>
        <div class="row">
            <p>
                {{ form.code_field.label }}
                {{ form.code_field(class="form-control")}}<br>
                {% for error in form.code_field.errors %}
            <div class="alert alert-danger" role="alert">
                {{ error }}
            </div>
            {% endfor %}
            </p>
        </div>
        <div class="row">
            {% if code_error_message %}
                <div class="alert alert-danger" role="alert"> {{ code_error_message }}</div>
            {% endif %}
        </div>
        <div class="row">
            <div class="mb-3">
                {{ form.run_algorithm_button(class="btn btn-primary") }}
            </div>
        </div>
        <div class="row">
            <div class="mb-3">
                {{ form.save_algorithm_button(class="btn btn-secondary") }}
            </div>
        </div>
    </form>
    <div class="row">
        {% if saving_error_message %}
            <div class="alert alert-danger" role="alert"> {{ saving_error_message }}</div>
        {% endif %}
    </div>
</div>
{% for i in range(22) %}
<br>

<script>
document.addEventListener("DOMContentLoaded", function() {

document.querySelectorAll('textarea, input').forEach(function(e) {
    if(e.value === '') e.value = window.sessionStorage.getItem(e.name, e.value);
    e.addEventListener('input', function() {
        window.sessionStorage.setItem(e.name, e.value);
    })
})

});
</script>
{% endfor %}
{% endblock %}